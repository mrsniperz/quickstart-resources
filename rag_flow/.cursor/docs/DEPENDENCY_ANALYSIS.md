# ä¾èµ–åˆ†ææŠ¥å‘Š

## æ¦‚è¿°

æœ¬æŠ¥å‘ŠåŸºäºå¯¹ `src/core/` ç›®å½•ä¸‹æ‰€æœ‰Pythonæ ¸å¿ƒä»£ç æ–‡ä»¶çš„å…¨é¢åˆ†æï¼Œè¯†åˆ«å¹¶æ›´æ–°äº†é¡¹ç›®çš„ç¬¬ä¸‰æ–¹åº“ä¾èµ–ã€‚

## åˆ†æèŒƒå›´

### æ‰«æçš„ç›®å½•å’Œæ–‡ä»¶
- `src/core/__init__.py` - æ ¸å¿ƒæ¨¡å—å…¥å£
- `src/core/milvus/` - Milvuså‘é‡æ•°æ®åº“æœåŠ¡æ¨¡å—
  - `collection_manager.py` - Collectionç®¡ç†æœåŠ¡
  - `search_service.py` - æ£€ç´¢æœåŠ¡
  - `metadata_service.py` - å…ƒæ•°æ®å…³è”æœåŠ¡
  - `data_service.py` - æ•°æ®æ“ä½œæœåŠ¡
- `src/core/document_processor/` - æ–‡æ¡£å¤„ç†æ¨¡å—
  - `parsers/` - æ–‡æ¡£è§£æå™¨ï¼ˆPDFã€Wordã€Excelã€PowerPointã€Doclingï¼‰
  - `chunking/` - æ™ºèƒ½åˆ†å—å¼•æ“
  - `extractors/` - å†…å®¹æå–å™¨
  - `utils/` - å·¥å…·ç±»
  - `api/` - APIæ¥å£
  - `cli/` - å‘½ä»¤è¡Œå·¥å…·
  - å„ç§ç¤ºä¾‹å’Œæµ‹è¯•æ–‡ä»¶

## ä¾èµ–å˜æ›´æ‘˜è¦

### ğŸ†• æ–°å¢ä¾èµ–
1. **docling>=2.0.0,<3.0.0** - ç»Ÿä¸€æ–‡æ¡£å¤„ç†åº“
   - **ç”¨é€”**: æä¾›ç»Ÿä¸€çš„å¤šæ ¼å¼æ–‡æ¡£è§£æèƒ½åŠ›
   - **æ”¯æŒæ ¼å¼**: PDFã€Wordã€HTMLã€Excelã€CSVã€Markdownã€å›¾ç‰‡ç­‰
   - **é€‰æ‹©ç†ç”±**: ç°ä»£åŒ–çš„æ–‡æ¡£å¤„ç†è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒé«˜çº§åŠŸèƒ½å¦‚OCRã€è¡¨æ ¼è¯†åˆ«ã€å›¾åƒæè¿°ç­‰
   - **Pythonè¦æ±‚**: >=3.9

### âœ… å¯ç”¨ä¾èµ–
1. **pytesseract>=0.3.10,<1.0.0** - OCRæ–‡æœ¬è¯†åˆ«
   - **çŠ¶æ€å˜æ›´**: ä»æ³¨é‡ŠçŠ¶æ€å¯ç”¨
   - **ç”¨é€”**: å›¾åƒä¸­çš„æ–‡æœ¬è¯†åˆ«ï¼Œæ”¯æŒæ‰«ææ–‡æ¡£å¤„ç†
   - **é€‰æ‹©ç†ç”±**: ä»£ç ä¸­å·²æœ‰ä½¿ç”¨ï¼Œåº”è¯¥å¯ç”¨ä»¥æ”¯æŒå®Œæ•´åŠŸèƒ½

### ğŸ”„ ç‰ˆæœ¬ç­–ç•¥ä¼˜åŒ–
- **ç‰ˆæœ¬èŒƒå›´**: ä¸ºæ‰€æœ‰ä¾èµ–æ·»åŠ äº†ä¸Šé™ç‰ˆæœ¬ï¼Œé¿å…ç ´åæ€§æ›´æ–°
- **å…¼å®¹æ€§**: ç¡®ä¿ç‰ˆæœ¬èŒƒå›´å…¼å®¹ï¼Œé¿å…ä¾èµ–å†²çª
- **ç¨³å®šæ€§**: æ ¸å¿ƒä¾èµ–ä½¿ç”¨è¾ƒä¸¥æ ¼çš„ç‰ˆæœ¬æ§åˆ¶

### ğŸ“ æ–‡æ¡£å’Œæ³¨é‡Šæ”¹è¿›
- ä¸ºæ¯ä¸ªä¾èµ–æ·»åŠ äº†ç”¨é€”è¯´æ˜
- æŒ‰åŠŸèƒ½æ¨¡å—é‡æ–°åˆ†ç»„ä¾èµ–
- æ·»åŠ äº†Pythonç‰ˆæœ¬è¦æ±‚è¯´æ˜

## è¯¦ç»†ä¾èµ–åˆ†æ

### æ ¸å¿ƒæ¡†æ¶ä¾èµ–
| ä¾èµ–åº“ | ç‰ˆæœ¬è¦æ±‚ | ç”¨é€” | åœ¨coreæ¨¡å—ä¸­çš„ä½¿ç”¨ |
|--------|----------|------|-------------------|
| fastapi | >=0.104.0,<1.0.0 | Web APIæ¡†æ¶ | é—´æ¥ä½¿ç”¨ï¼ˆé¡¹ç›®æ¶æ„éœ€è¦ï¼‰ |
| pydantic | >=2.5.0,<3.0.0 | æ•°æ®éªŒè¯ | é—´æ¥ä½¿ç”¨ï¼ˆæ•°æ®æ¨¡å‹å®šä¹‰ï¼‰ |
| uvicorn | >=0.24.0,<1.0.0 | ASGIæœåŠ¡å™¨ | é—´æ¥ä½¿ç”¨ï¼ˆæœåŠ¡éƒ¨ç½²ï¼‰ |

### å‘é‡æ•°æ®åº“ä¾èµ–
| ä¾èµ–åº“ | ç‰ˆæœ¬è¦æ±‚ | ç”¨é€” | åœ¨coreæ¨¡å—ä¸­çš„ä½¿ç”¨ |
|--------|----------|------|-------------------|
| pymilvus | >=2.3.0,<3.0.0 | Milvuså®¢æˆ·ç«¯ | ç›´æ¥ä½¿ç”¨ï¼ˆmilvusæ¨¡å—ï¼‰ |

### æ–‡æ¡£å¤„ç†ä¾èµ–
| ä¾èµ–åº“ | ç‰ˆæœ¬è¦æ±‚ | ç”¨é€” | åœ¨coreæ¨¡å—ä¸­çš„ä½¿ç”¨ |
|--------|----------|------|-------------------|
| docling | >=2.0.0,<3.0.0 | ç»Ÿä¸€æ–‡æ¡£å¤„ç† | ç›´æ¥ä½¿ç”¨ï¼ˆdocling_parser.pyï¼‰ |
| pymupdf | >=1.23.0,<2.0.0 | PDFå¤„ç† | ç›´æ¥ä½¿ç”¨ï¼ˆpdf_parser.pyï¼‰ |
| python-docx | >=1.1.0,<2.0.0 | Wordå¤„ç† | ç›´æ¥ä½¿ç”¨ï¼ˆword_parser.pyï¼‰ |
| openpyxl | >=3.1.0,<4.0.0 | Excelå¤„ç† | ç›´æ¥ä½¿ç”¨ï¼ˆexcel_parser.pyï¼‰ |
| python-pptx | >=0.6.23,<1.0.0 | PowerPointå¤„ç† | ç›´æ¥ä½¿ç”¨ï¼ˆpowerpoint_parser.pyï¼‰ |
| Pillow | >=10.0.0,<11.0.0 | å›¾åƒå¤„ç† | ç›´æ¥ä½¿ç”¨ï¼ˆå›¾åƒæå–å’Œå¤„ç†ï¼‰ |
| pytesseract | >=0.3.10,<1.0.0 | OCRè¯†åˆ« | ç›´æ¥ä½¿ç”¨ï¼ˆæ–‡æœ¬è¯†åˆ«åŠŸèƒ½ï¼‰ |

### æ•°æ®å¤„ç†ä¾èµ–
| ä¾èµ–åº“ | ç‰ˆæœ¬è¦æ±‚ | ç”¨é€” | åœ¨coreæ¨¡å—ä¸­çš„ä½¿ç”¨ |
|--------|----------|------|-------------------|
| pandas | >=2.1.0,<3.0.0 | æ•°æ®å¤„ç† | ç›´æ¥ä½¿ç”¨ï¼ˆè¡¨æ ¼æ•°æ®å¤„ç†ï¼‰ |
| numpy | >=1.24.0,<2.0.0 | æ•°å€¼è®¡ç®— | é—´æ¥ä½¿ç”¨ï¼ˆpandasä¾èµ–ï¼‰ |

### æœºå™¨å­¦ä¹ ä¾èµ–
| ä¾èµ–åº“ | ç‰ˆæœ¬è¦æ±‚ | ç”¨é€” | åœ¨coreæ¨¡å—ä¸­çš„ä½¿ç”¨ |
|--------|----------|------|-------------------|
| transformers | >=4.35.0,<5.0.0 | æ·±åº¦å­¦ä¹ æ¨¡å‹ | ç›´æ¥ä½¿ç”¨ï¼ˆé«˜çº§æ–‡æ¡£å¤„ç†ï¼‰ |
| torch | >=2.1.0,<3.0.0 | PyTorchæ¡†æ¶ | ç›´æ¥ä½¿ç”¨ï¼ˆæ¨¡å‹æ¨ç†ï¼‰ |
| sentence-transformers | >=2.2.0,<3.0.0 | å‘é‡åŒ–æ¨¡å‹ | é—´æ¥ä½¿ç”¨ï¼ˆå‘é‡ç”Ÿæˆï¼‰ |

## å…¼å®¹æ€§è¯´æ˜

### Pythonç‰ˆæœ¬è¦æ±‚
- **æœ€ä½ç‰ˆæœ¬**: Python 3.9
- **æ¨èç‰ˆæœ¬**: Python 3.10+
- **åŸå› **: doclingåº“è¦æ±‚Python>=3.9

### ä¾èµ–å†²çªæ£€æŸ¥
- âœ… æ‰€æœ‰ä¾èµ–ç‰ˆæœ¬èŒƒå›´ç»è¿‡å…¼å®¹æ€§éªŒè¯
- âœ… æ²¡æœ‰å‘ç°ç‰ˆæœ¬å†²çª
- âœ… æ ¸å¿ƒä¾èµ–ä½¿ç”¨ç¨³å®šç‰ˆæœ¬

### å¯é€‰ä¾èµ–è¯´æ˜
- **pytesseract**: éœ€è¦ç³»ç»Ÿå®‰è£…Tesseract OCRå¼•æ“
- **torch**: å»ºè®®ä½¿ç”¨GPUç‰ˆæœ¬ä»¥è·å¾—æ›´å¥½æ€§èƒ½
- **transformers**: é¦–æ¬¡ä½¿ç”¨æ—¶ä¼šä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹

## å®‰è£…å»ºè®®

### åŸºç¡€å®‰è£…
```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements.txt

# éªŒè¯æ ¸å¿ƒåŠŸèƒ½
python -c "from src.core import get_system_status; print(get_system_status())"
```

### ç³»ç»Ÿä¾èµ–
```bash
# Ubuntu/Debian
sudo apt-get install tesseract-ocr tesseract-ocr-chi-sim

# macOS
brew install tesseract tesseract-lang

# Windows
# ä¸‹è½½å¹¶å®‰è£… Tesseract OCR
```

### GPUæ”¯æŒï¼ˆå¯é€‰ï¼‰
```bash
# å®‰è£…GPUç‰ˆæœ¬çš„PyTorch
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```

## ç»´æŠ¤å»ºè®®

1. **å®šæœŸæ›´æ–°**: å»ºè®®æ¯å­£åº¦æ£€æŸ¥ä¾èµ–æ›´æ–°
2. **å®‰å…¨æ‰«æ**: ä½¿ç”¨ `pip-audit` æ£€æŸ¥å®‰å…¨æ¼æ´
3. **ç‰ˆæœ¬é”å®š**: ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ `pip freeze` é”å®šå…·ä½“ç‰ˆæœ¬
4. **æµ‹è¯•éªŒè¯**: æ›´æ–°ä¾èµ–åè¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶

## æ€»ç»“

æœ¬æ¬¡ä¾èµ–åˆ†æå’Œæ›´æ–°ä¸»è¦è§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š
1. æ·»åŠ äº†ç¼ºå¤±çš„æ ¸å¿ƒä¾èµ– `docling`
2. å¯ç”¨äº†è¢«æ³¨é‡Šçš„ `pytesseract` ä¾èµ–
3. ä¼˜åŒ–äº†ç‰ˆæœ¬ç®¡ç†ç­–ç•¥ï¼Œå¢åŠ äº†ç‰ˆæœ¬ä¸Šé™
4. æ”¹è¿›äº†ä¾èµ–åˆ†ç±»å’Œæ–‡æ¡£è¯´æ˜
5. ç¡®ä¿äº†æ‰€æœ‰ä¾èµ–çš„å…¼å®¹æ€§

æ›´æ–°åçš„ `requirements.txt` æ–‡ä»¶æ›´åŠ å®Œæ•´ã€å®‰å…¨å’Œæ˜“äºç»´æŠ¤ã€‚
