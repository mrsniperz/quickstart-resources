---
trigger: model_decision
description: 
globs: 
---
# 大模型辅助架构设计与功能开发FEATURE_PROGRESS生成规则

## 目标
本规则旨在指导大模型在理解用户提出的需求后，能够：
1.  整理和输出清晰的系统架构设计。
2.  根据架构设计，生成一份详细的功能开发待办事项 (FEATURE_PROGRESS)。

## 指导原则
- **清晰性**：所有输出的文档和列表都应清晰易懂。
- **完整性**：尽量覆盖用户需求中的所有关键点。
- **结构化**：架构设计和功能列表应具有良好的结构。
- **可操作性**：功能列表中的待办事项应具体、可执行。

## 执行流程

### 第一阶段：需求理解与分析
*   **输入**：用户提出的原始需求描述。
*   **任务**：
    1.  仔细阅读和理解用户需求，识别核心业务流程和目标。
    2.  提取关键功能点和非功能性需求（如性能、安全、用户体验、可扩展性等）。
    3.  若需求描述存在模糊、歧义或遗漏，应主动向用户提问以澄清。
    4.  将理解后的需求整理成结构化的需求列表。
*   **输出**：
    *   一份明确、无歧义的需求列表。
    *   (可选) 用户画像和用户故事。

### 第二阶段：系统架构设计
*   **输入**：第一阶段产出的需求列表。
*   **任务**：
    1.  **技术选型**：根据需求特性（如高并发、数据密集型、实时性要求等），初步选择合适的技术栈（如编程语言、框架、数据库、中间件等）。
    2.  **模块划分**：将系统划分为若干高内聚、低耦合的模块或服务。明确每个模块的核心职责。
    3.  **交互设计**：定义模块/服务之间的主要交互方式、接口和数据流。考虑同步/异步通信。
    4.  **数据模型设计**：初步设计核心业务数据的存储结构和关系。
    5.  **关键非功能性需求考量**：
        *   **安全性**：考虑认证、授权、数据加密等。
        *   **性能**：预估关键接口的性能指标，设计相应的优化策略（如缓存、负载均衡）。
        *   **可扩展性**：设计易于水平或垂直扩展的架构。
        *   **可维护性**：采用清晰的命名规范、分层结构等。
    6.  **部署考量**：初步设想系统的部署环境和方式。
*   **输出**：
    *   系统架构图（如组件图、部署图等，若能生成文本描述或简单图示更佳）。
    *   主要模块/服务列表及其核心职责描述。
    *   关键技术选型及其理由。
    *   核心数据实体及其关系描述。

### 第三阶段：功能开发FEATURE_PROGRESS生成
*   **输入**：第二阶段产出的系统架构设计。
*   **任务**：
    1.  基于架构设计中的模块/服务，将每个模块/服务的功能进一步细化。
    2.  针对每个细化后的功能点，创建具体的开发任务。
    3.  确保每个任务都是一个可独立完成和验证的单元。
    4.  为每个任务设定一个初始状态（如：未开始）。
    5.  （可选）为每个任务预估一个大致的优先级或依赖关系。
*   **输出**：一份结构化的功能开发FEATURE_PROGRESS，格式建议如下：

    ```
    ## 功能开发 Checklist

    ### 模块一：[模块名称，例如：用户管理]
    - [ ] **功能点 1.1**：[具体功能描述，例如：用户注册功能]
        - [ ] 子任务 1.1.1: 设计用户注册API接口
        - [ ] 子任务 1.1.2: 实现用户注册逻辑（数据校验、密码加密）
        - [ ] 子任务 1.1.3: 数据库表设计与创建 (users表)
        - [ ] 子任务 1.1.4: 编写单元测试
    - [ ] **功能点 1.2**：[具体功能描述，例如：用户登录功能]
        - [ ] 子任务 1.2.1: 设计用户登录API接口
        - [ ] 子任务 1.2.2: 实现用户登录逻辑（凭证验证、session/token生成）
        - [ ] 子任务 1.2.3: 编写单元测试

    ### 模块二：[模块名称，例如：文章管理]
    - [ ] **功能点 2.1**：[具体功能描述，例如：创建文章]
        - [ ] 子任务 2.1.1: 设计创建文章API接口
        - [ ] 子任务 2.1.2: 实现文章创建逻辑
        - [ ] 子任务 2.1.3: 数据库表设计与创建 (articles表)
        - [ ] 子任务 2.1.4: 编写单元测试
    ...
    ```

## 注意事项
- 大模型在执行此规则时，应鼓励与用户进行多轮交互，确保设计的方向和细节符合用户预期。
- 对于复杂系统，架构设计和功能拆解可能需要迭代进行。
- 生成的Checklist应方便用户后续跟踪和管理项目进度。
- 生成后的文件应以FEATURE_PROGRESS.md命名，并存放在.cursor/docs文件夹下