2025-06-25 12:26:11,016 - simplified_chunking_tester - INFO - 简化分块引擎初始化成功
🚀 简化分块系统预设配置测试脚本启动
📋 当前配置: 分块大小=1000, 重叠=200
{
  "preset_used": "standard",
  "processing_time": 0.001689910888671875,
  "statistics": {
    "chunk_count": 5,
    "total_characters": 3716,
    "average_chunk_size": 743.2,
    "min_chunk_size": 314,
    "max_chunk_size": 976,
    "processing_speed": 2204258.2392776525,
    "coverage_rate": 99.75838926174497
  },
  "validation": {
    "total_chunks": 5,
    "valid_chunks": 5,
    "invalid_chunks": 0,
    "avg_quality_score": 0.8236749999999999,
    "issues": []
  },
  "chunks": [
    {
      "content": "---\n\n# 需求\n\n## 概述\n\n### 1.1 AI应用目标\n\n1. **AI会议助手**\n   - 关键要素识别准确率（≥90%）；\n   - 辅助会议纪要撰写，提升生成效率。\n2. **飞机排故AI专家**\n   - 知识库对川航机队的覆盖率（≥95%）；\n   - 辅助工程师排故，提升排故效率。\n3. **AI图文识别**\n   - 关键参数识别准确率（≥99%）；\n   - 提升飞机、发动机厂商原始资料结构化处理效率。\n4. **AI+视觉识别飞机标识标牌**\n   - 主要场景识别准确率（≥95%）；\n   - 辅助标识标牌识别，提高检测效率。\n\n### 1.8 数据源种类\n\n- 数据库\n- 图片\n- 语音\n- 视频\n- WORD\n- EXCEL\n- PDF\n- 网页等类型文件\n\n### 1.9 数据需求\n\n| 数据内容 | 是否核心数据 | 拟数据来源系统 | 是否跨部门使用 |\n|----------|--------------|----------------|----------------|\n| 会议音频文件 | 否 | 线下采集 | 否 |\n| 飞机标识标牌图片、视频文件 | 否 | 线下采集 | 否 |\n| 飞机部附件资料 | 否 | 厂家提供的PDF/图片资料 | 否 |\n| 飞机系统原理图、故障诊断规则、维修流程、技术手册等数据的结构化存储 | 否 | 机务平台、AGS系统 | 否 |\n\n## 二、业务需求\n\n### 2.1 需求汇总表\n\n| 功能模块 | 功能名称 |\n|----------|----------|\n| AI应用市场 | AI应用市场 |\n| AI模型服务管理 | AI模型服务管理 |\n| 智能体管理 | 能体中心 |\n| 模型管理 | 模型管理 |\n| 知识库 | 知识库 |\n| 标注管理 | 标注管理 |\n| 训练管理 | 训练管理 |\n| 微调管理 | 微调管理 |\n| 推理管理 | 编排推理 |\n| workflow流程 | 流程编排 |\n| 数据源管理 | 接入数据、数据清洗、管理工作 |\n| 智算资源池 | 智算资源池 |\n| 平台管理 | 平台管理 |\n\n### 2.3 需求\n\n#### 2.3.1 AI应用市场功能模块\n\n**功能名称**：AI应用市场",
      "character_count": 976,
      "word_count": 183,
      "quality_score": 0.8799999999999999,
      "metadata": {
        "chunk_id": "项目需求.md_0000",
        "chunk_type": "ChunkType.PARAGRAPH",
        "source_document": "test_docs/项目需求.md"
      }
    },
    {
      "content": "**需求**：\n- 用户可在此模块对平台搭建的所有AI应用进行增、删、改、查操作。\n- 本项目需在本平台基础上孵化4个机务领域的AI应用，需求如下：\n\n##### AI应用一：AI+会议助手\n\n| 功能集成 | 简介 |\n|----------|------|\n| 录音、音频实时转译模块 | 集成音频即时录入、AI即时转译生成文本功能 |\n| 三方音频文件导入及AI转写功能 | 由三方音频文本录入实现音频内容AI转写生成文本 |\n| AI模板 | 一键生成标准会议纪要及相关行政发文标准模板 |\n| AI辅助工具 | 基于输入音频、输入文本内容，实现衍生AI扩写、AI改写功能 |\n\n##### AI应用二：飞机排故AI专家",
      "character_count": 314,
      "word_count": 35,
      "quality_score": 0.69775,
      "metadata": {
        "chunk_id": "项目需求.md_0001",
        "chunk_type": "ChunkType.PARAGRAPH",
        "source_document": "test_docs/项目需求.md"
      }
    },
    {
      "content": "1. **知识库管理模块**\n   - 结构化知识存储：支持多种格式数据的结构化存储，按机型、系统、故障类型分类。\n   - 动态更新机制：支持手动录入与自动更新，结合版本控制与审核流程。\n   - 快速方便检索：建立以飞机为中心的检索功能，方便查阅相关信息。\n2. **智能推理与诊断模块**\n   - 多维度故障推理：基于故障树（FTA）和贝叶斯网络，支持模糊输入的语义解析与容错匹配。\n   - 动态交互式诊断：通过对话模式引导工程师补充关键信息，逐步缩小故障范围。\n   - 故障识别与分析统计：自动识别重复故障，分析排故历史，总结规律。\n3. **用户交互界面（UI/UX）**\n   - 多端适配：支持PC端和移动端访问，适配离线模式。\n   - 输入优化：提供快速输入模板，支持语音输入与OCR识别。\n   - 可视化输出：以流程图形式展示推理路径，支持一键生成排故方案报告。\n4. **解释与溯源系统**\n   - 透明化推理依据：对每项建议标注来源，提供自然语言解释。\n5. **自学习与优化模块**\n   - 案例学习：自动解析闭环维修工单，提取有效信息补充至知识库。\n6. **系统集成与协同**\n   - 外部系统对接：与AMRO中航材管理模块、工具模块、NRC模块、SAP相关系统联动。\n7. **安全与权限管理**\n   - 分级权限控制：按角色分配权限，记录操作日志。\n   - 数据加密：确保敏感内容传输与存储符合民航法规和公司手册规定。\n8. **效能监控与报表**\n   - 实时统计看板：展示系统使用率、方案采纳率等核心指标。\n   - 自动化报告生成：按周期输出效能分析。\n\n##### AI应用三：AI+图文识别\n\n- 部附件数据采集：从厂家PDF/图片资料中抓取数据，生成SAP报表，自动录入SAP系统。\n\n##### AI应用四：AI+视觉识别飞机标识标牌\n\n- 视频识别影像AI比对，人工复核处置建议，确定处置指令。\n- 功能备注：通过AI图像识别技术自动扫描和识别飞机标识标牌，分析破损程度等问题。\n\n#### 2.3.2 AI模型服务管理功能模块\n\n**功能名称**：AI模型服务管理",
      "character_count": 918,
      "word_count": 62,
      "quality_score": 0.8799999999999999,
      "metadata": {
        "chunk_id": "项目需求.md_0002",
        "chunk_type": "ChunkType.PARAGRAPH",
        "source_document": "test_docs/项目需求.md"
      }
    },
    {
      "content": "**需求**：\n- 对业务系统提供公网AI大模型API接口转接服务。\n- 提供本地私有化部署的AI模型的API接口服务。\n- 具备对AI模型的编排功能，支持多模态AI大模型服务。\n- 同一API接口可同时为多个业务系统应用提供服务。\n- 对API接口进行配置和管理。\n\n#### 2.3.3 智能体管理功能模块\n\n**功能名称**：智能体管理\n\n**需求**：\n- 0代码搭建多智能体流水线，灵活配置，快速上线。\n- 提供智能体创建、编排、发布功能。\n\n#### 2.3.4 模型管理功能模块\n\n**功能名称**：模型管理\n\n**需求**：\n- 具备AI模型增、删、改、查功能。\n- 为AI模型进行分级分类管理。\n- 提供AI模型申请审批功能。\n- 兼容国产、非国产AI模型。\n\n#### 2.3.5 知识库功能模块\n\n**功能名称**：知识库\n\n**需求**：\n- 具备知识库增、删、改、查功能。\n- 对不同知识库进行权限管理。\n- 支持多种类型数据源。\n- 可对接第三方知识库。\n\n#### 2.3.6 标注管理功能模块\n\n**功能名称**：标注管理\n\n**需求**：\n- 提供多种主流的标注工具。\n- 支持人工标注和自动标注。\n\n#### 2.3.7 训练管理功能模块\n\n**功能名称**：训练管理\n\n**需求**：\n- 提供简洁易用的AI模型预训练功能。\n- 支持本地训练和对接云端算力资源进行训练。\n\n#### 2.3.8 微调管理功能模块\n\n**功能名称**：微调管理\n\n**需求**：\n- 提供简洁易用的AI模型微调训练功能。\n- 支持本地微调和对接云端算力资源进行微调。\n\n#### 2.3.9 推理管理功能模块\n\n**功能名称**：推理管理\n\n**需求**：\n- 提供AI模型推理的测试功能。\n- 对AI模型的推理进度进行监控管理。\n- 对推理资源的配置和动态调度。\n\n#### 2.3.10 workflow流程功能模块\n\n**功能名称**：workflow流程\n\n**需求**：\n- 对业务流进行创建、编排、发布。\n\n#### 2.3.11 数据源管理功能模块\n\n**功能名称**：数据源管理\n\n**需求**：\n- 对业务流进行创建、编排、发布。\n\n#### 2.3.12 智算资源池功能模块\n\n**功能名称**：智算资源池",
      "character_count": 973,
      "word_count": 102,
      "quality_score": 0.8799999999999999,
      "metadata": {
        "chunk_id": "项目需求.md_0003",
        "chunk_type": "ChunkType.PARAGRAPH",
        "source_document": "test_docs/项目需求.md"
      }
    },
    {
      "content": "**需求**：\n- 对物理资源进行虚化管理、分配和调度。\n- 具备虚化资源的增、删、改、查功能。\n- 兼容异构的算力资源，适配合适的硬件资源。\n\n#### 2.3.13 平台管理功能模块\n\n**功能名称**：平台管理\n\n**需求**：\n- 提供组织机构及用户管理、权限管理、监控管理、日志管理、智能运维管理等功能。\n- 对接川航统一身份认证单点登录接口。\n\n### 2.4 非功能需求\n\n#### 2.4.1 系统运行环境需求\n\n- 平台需连接外网云端AI大模型接口和公有云算力资源进行模型训练，需开放外网访问权限。\n\n#### 2.4.2 系统性能需求\n\n- 预估峰值时段：8:30～16:30\n- 预估峰值访问量：\n  - 大语言模型的峰值并发量预计为100；\n  - AI+会议助手、AI+图文识别、AI+视觉识别飞机标识标牌3个AI应用的峰值并发量预计为30；\n  - 飞机排故AI专家峰值并发量预计为30。\n- AI机身标牌识别时间：一个区域的识别时间不超过1秒。\n\n#### 2.4.3 系统可靠性\n\n- 可接受中断时长：1小时。\n\n#### 2.4.4 可扩展性需求\n\n- 是否有长期系统建设的计划：有。\n- 是否系统规模会持续扩大：会持续扩大。\n\n---",
      "character_count": 535,
      "word_count": 52,
      "quality_score": 0.7806249999999999,
      "metadata": {
        "chunk_id": "项目需求.md_0004",
        "chunk_type": "ChunkType.PARAGRAPH",
        "source_document": "test_docs/项目需求.md"
      }
    }
  ],
  "metadata": {
    "quality_assessment": {
      "strategy_name": "basic",
      "enabled": true,
      "config": {
        "min_length": 100,
        "max_length": 2000,
        "optimal_length": 1000,
        "enable_quality_check": true,
        "length_weight": 0.6,
        "completeness_weight": 0.4,
        "description": "基础质量检查，适用于大多数场景"
      },
      "preset": "basic",
      "score_calculation": {
        "method": "weighted_average",
        "length_weight": 0.6,
        "completeness_weight": 0.4,
        "formula": "length_score * 0.6 + completeness_score * 0.4"
      }
    },
    "chunking_config": {
      "chunk_size": 1000,
      "chunk_overlap": 200,
      "min_chunk_size": 100,
      "max_chunk_size": 2000,
      "preserve_context": true,
      "enable_quality_assessment": true,
      "quality_strategy": "basic"
    },
    "validation_info": {
      "method": "average_non_null_scores",
      "total_chunks_evaluated": 5,
      "chunks_with_scores": 5,
      "avg_calculation": "sum(non_null_scores) / count(non_null_scores)"
    }
  }
}
